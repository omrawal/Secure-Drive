{% extends 'main/base.html' %}
{% load static %}
{% block title %}Profile{% endblock title %}
{% block content%}
<div class="userprofile text-center">
  <br><br><br>
  <h3 class="margin">{{user.first_name}} {{user.last_name}}</h3>
  <!-- <div class="wrapper"> -->
    <div class="profile-pic-div">
      
      <img src="{% static 'main/images/profile.jpg' %}" id="photo">
      <!-- <img src="{{picture.url}}" id="photo"> -->

      <div>
      <input type="file" id="file">
    </div>
      <label for="file" id="uploadBtn"></label>
    </div>
    <!-- <input type="file" name="file_data"  /> -->
      <!-- <img src="{% static 'main/images/profile.jpg' %}" class="img-responsive img-circle margin" style="display: inline"
    alt="Display Picture" width="300px" height="300px" text-align="center" margin-left="100px auto" /> -->
  <!-- </div> -->
    <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
  <h3>
    USERNAME<br />
    {{user.username}}
  </h3>
</div>

<!-- Second Container -->
<div class="aboutuser bg-2 text-center">
  <table class="content">
    <tr>
      <th>Files Stored</th>
      <th> {{file_length}} </th>

    </tr>
    <tr>
      <th>Storage Used</th>
      <th> {{total_file_size}} </th>
    </tr>
  </table>

  <!-- <h3 class="margin">About Me</h3>
  <p>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
    tempor incididunt ut labore et dolore magna aliqua. <br />Ut enim ad minim
    veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea
    commodo consequat.<br />
  </p> -->
</div>


<script>
  const imgDiv = document.querySelector('.profile-pic-div');
const img = document.querySelector('#photo');
const file = document.querySelector('#file');
const uploadBtn = document.querySelector('#uploadBtn');

//if user hover on img div 

imgDiv.addEventListener('mouseenter', function(){
    uploadBtn.style.display = "block";
});

//if we hover out from img div

imgDiv.addEventListener('mouseleave', function(){
    uploadBtn.style.display = "none";
});


file.addEventListener('change', function(){
    //this refers to file
    const choosedFile = this.files[0];

    if (choosedFile) {

        const reader = new FileReader(); //FileReader is a predefined function of JS

        reader.addEventListener('load', function(){
            img.setAttribute('src', reader.result);
        });

        reader.readAsDataURL(choosedFile);

      
    }
});
</script>
{% endblock content %}